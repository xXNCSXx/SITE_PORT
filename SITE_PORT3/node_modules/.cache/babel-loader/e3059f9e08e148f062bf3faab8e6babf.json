{"ast":null,"code":"import deepEqual from 'fast-deep-equal';\nconst globalCache = [];\nfunction handleAsset(fn, cache, args, lifespan = 0, preload = false) {\n  for (const entry of cache) {\n    // Find a match\n    if (deepEqual(args, entry.args)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return; // If an error occurred, throw\n\n      if (entry.error) throw entry.error; // If a response was successful, return\n\n      if (entry.response) return entry.response; // If the promise is still unresolved, throw\n\n      throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n  const entry = {\n    args,\n    promise:\n    // Make the promise request.\n    fn(...args) // Response can't be undefined or else the loop above wouldn't be able to return it\n    // This is for promises that do not return results (delays for instance)\n    .then(response => entry.response = response != null ? response : true).catch(e => entry.error = e != null ? e : 'unknown error').then(() => {\n      if (lifespan > 0) {\n        setTimeout(() => {\n          const index = cache.indexOf(entry);\n          if (index !== -1) cache.splice(index, 1);\n        }, lifespan);\n      }\n    })\n  };\n  cache.push(entry);\n  if (!preload) throw entry.promise;\n}\nfunction clear(cache, ...args) {\n  if (args === undefined || args.length === 0) cache.splice(0, cache.length);else {\n    const entry = cache.find(entry => deepEqual(args, entry.args));\n    if (entry) {\n      const index = cache.indexOf(entry);\n      if (index !== -1) cache.splice(index, 1);\n    }\n  }\n}\nfunction createAsset(fn, lifespan = 0) {\n  const cache = [];\n  return {\n    /**\n     * @throws Suspense Promise if asset is not yet ready\n     * @throws Error if the promise rejected for some reason\n     */\n    read: (...args) => handleAsset(fn, cache, args, lifespan),\n    preload: (...args) => void handleAsset(fn, cache, args, lifespan, true),\n    clear: (...args) => clear(cache, ...args),\n    peek: (...args) => {\n      var _cache$find;\n      return (_cache$find = cache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _cache$find.response;\n    }\n  };\n}\nfunction useAsset(fn, ...args) {\n  return handleAsset(fn, globalCache, args, useAsset.lifespan);\n}\nuseAsset.lifespan = 0;\nuseAsset.clear = (...args) => clear(globalCache, ...args);\nuseAsset.preload = (fn, ...args) => void handleAsset(fn, globalCache, args, useAsset.lifespan, true);\nuseAsset.peek = (...args) => {\n  var _globalCache$find;\n  return (_globalCache$find = globalCache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _globalCache$find.response;\n};\nexport { createAsset, useAsset };","map":{"version":3,"names":["deepEqual","globalCache","handleAsset","fn","cache","args","lifespan","preload","entry","error","response","promise","then","catch","e","setTimeout","index","indexOf","splice","push","clear","undefined","length","find","createAsset","read","peek","_cache$find","useAsset","_globalCache$find"],"sources":["C:/Users/drncs/OneDrive/Ãrea de Trabalho/PORTIFOLIO/SITE3/node_modules/use-asset/dist/index.js"],"sourcesContent":["import deepEqual from 'fast-deep-equal';\n\nconst globalCache = [];\n\nfunction handleAsset(fn, cache, args, lifespan = 0, preload = false) {\n  for (const entry of cache) {\n    // Find a match\n    if (deepEqual(args, entry.args)) {\n      // If we're pre-loading and the element is present, just return\n      if (preload) return; // If an error occurred, throw\n\n      if (entry.error) throw entry.error; // If a response was successful, return\n\n      if (entry.response) return entry.response; // If the promise is still unresolved, throw\n\n      throw entry.promise;\n    }\n  } // The request is new or has changed.\n\n\n  const entry = {\n    args,\n    promise: // Make the promise request.\n    fn(...args) // Response can't be undefined or else the loop above wouldn't be able to return it\n    // This is for promises that do not return results (delays for instance)\n    .then(response => entry.response = response != null ? response : true).catch(e => entry.error = e != null ? e : 'unknown error').then(() => {\n      if (lifespan > 0) {\n        setTimeout(() => {\n          const index = cache.indexOf(entry);\n          if (index !== -1) cache.splice(index, 1);\n        }, lifespan);\n      }\n    })\n  };\n  cache.push(entry);\n  if (!preload) throw entry.promise;\n}\n\nfunction clear(cache, ...args) {\n  if (args === undefined || args.length === 0) cache.splice(0, cache.length);else {\n    const entry = cache.find(entry => deepEqual(args, entry.args));\n\n    if (entry) {\n      const index = cache.indexOf(entry);\n      if (index !== -1) cache.splice(index, 1);\n    }\n  }\n}\n\nfunction createAsset(fn, lifespan = 0) {\n  const cache = [];\n  return {\n    /**\n     * @throws Suspense Promise if asset is not yet ready\n     * @throws Error if the promise rejected for some reason\n     */\n    read: (...args) => handleAsset(fn, cache, args, lifespan),\n    preload: (...args) => void handleAsset(fn, cache, args, lifespan, true),\n    clear: (...args) => clear(cache, ...args),\n    peek: (...args) => {\n      var _cache$find;\n\n      return (_cache$find = cache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _cache$find.response;\n    }\n  };\n}\n\nfunction useAsset(fn, ...args) {\n  return handleAsset(fn, globalCache, args, useAsset.lifespan);\n}\n\nuseAsset.lifespan = 0;\n\nuseAsset.clear = (...args) => clear(globalCache, ...args);\n\nuseAsset.preload = (fn, ...args) => void handleAsset(fn, globalCache, args, useAsset.lifespan, true);\n\nuseAsset.peek = (...args) => {\n  var _globalCache$find;\n\n  return (_globalCache$find = globalCache.find(entry => deepEqual(args, entry.args))) == null ? void 0 : _globalCache$find.response;\n};\n\nexport { createAsset, useAsset };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}