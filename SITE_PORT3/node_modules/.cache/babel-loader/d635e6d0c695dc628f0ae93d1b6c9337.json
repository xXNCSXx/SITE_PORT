{"ast":null,"code":"import { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { LuminanceNode } from './LuminanceNode.js';\nfunction ColorAdjustmentNode(rgb, adjustment, method) {\n  TempNode.call(this, 'v3');\n  this.rgb = rgb;\n  this.adjustment = adjustment;\n  this.method = method || ColorAdjustmentNode.SATURATION;\n}\nColorAdjustmentNode.Nodes = function () {\n  var hue = new FunctionNode(['vec3 hue(vec3 rgb, float adjustment) {', '\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);', '\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);', '\tvec3 yiq = RGBtoYIQ * rgb;', '\tfloat hue = atan(yiq.z, yiq.y) + adjustment;', '\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);', '\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));', '}'].join('\\n'));\n  var saturation = new FunctionNode([\n  // Algorithm from Chapter 16 of OpenGL Shading Language\n  'vec3 saturation(vec3 rgb, float adjustment) {', '\tvec3 intensity = vec3( luminance( rgb ) );', '\treturn mix( intensity, rgb, adjustment );', '}'].join('\\n'), [LuminanceNode.Nodes.luminance]); // include LuminanceNode function\n\n  var vibrance = new FunctionNode([\n  // Shader by Evan Wallace adapted by @lo-th\n  'vec3 vibrance(vec3 rgb, float adjustment) {', '\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;', '\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));', '\tfloat amt = (mx - average) * (-3.0 * adjustment);', '\treturn mix(rgb.rgb, vec3(mx), amt);', '}'].join('\\n'));\n  return {\n    hue: hue,\n    saturation: saturation,\n    vibrance: vibrance\n  };\n}();\nColorAdjustmentNode.SATURATION = 'saturation';\nColorAdjustmentNode.HUE = 'hue';\nColorAdjustmentNode.VIBRANCE = 'vibrance';\nColorAdjustmentNode.BRIGHTNESS = 'brightness';\nColorAdjustmentNode.CONTRAST = 'contrast';\nColorAdjustmentNode.prototype = Object.create(TempNode.prototype);\nColorAdjustmentNode.prototype.constructor = ColorAdjustmentNode;\nColorAdjustmentNode.prototype.nodeType = 'ColorAdjustment';\nColorAdjustmentNode.prototype.hashProperties = ['method'];\nColorAdjustmentNode.prototype.generate = function (builder, output) {\n  var rgb = this.rgb.build(builder, 'v3'),\n    adjustment = this.adjustment.build(builder, 'f');\n  switch (this.method) {\n    case ColorAdjustmentNode.BRIGHTNESS:\n      return builder.format('( ' + rgb + ' + ' + adjustment + ' )', this.getType(builder), output);\n    case ColorAdjustmentNode.CONTRAST:\n      return builder.format('( ' + rgb + ' * ' + adjustment + ' )', this.getType(builder), output);\n  }\n  var method = builder.include(ColorAdjustmentNode.Nodes[this.method]);\n  return builder.format(method + '( ' + rgb + ', ' + adjustment + ' )', this.getType(builder), output);\n};\nColorAdjustmentNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.rgb = source.rgb;\n  this.adjustment = source.adjustment;\n  this.method = source.method;\n  return this;\n};\nColorAdjustmentNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.rgb = this.rgb.toJSON(meta).uuid;\n    data.adjustment = this.adjustment.toJSON(meta).uuid;\n    data.method = this.method;\n  }\n  return data;\n};\nexport { ColorAdjustmentNode };","map":{"version":3,"names":["TempNode","FunctionNode","LuminanceNode","ColorAdjustmentNode","rgb","adjustment","method","call","SATURATION","Nodes","hue","join","saturation","luminance","vibrance","HUE","VIBRANCE","BRIGHTNESS","CONTRAST","prototype","Object","create","constructor","nodeType","hashProperties","generate","builder","output","build","format","getType","include","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"sources":["C:/Users/drncs/OneDrive/√Årea de Trabalho/PORTIFOLIO/SITE3/node_modules/three-stdlib/nodes/effects/ColorAdjustmentNode.js"],"sourcesContent":["import { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { LuminanceNode } from './LuminanceNode.js';\n\nfunction ColorAdjustmentNode(rgb, adjustment, method) {\n  TempNode.call(this, 'v3');\n  this.rgb = rgb;\n  this.adjustment = adjustment;\n  this.method = method || ColorAdjustmentNode.SATURATION;\n}\n\nColorAdjustmentNode.Nodes = function () {\n  var hue = new FunctionNode(['vec3 hue(vec3 rgb, float adjustment) {', '\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);', '\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);', '\tvec3 yiq = RGBtoYIQ * rgb;', '\tfloat hue = atan(yiq.z, yiq.y) + adjustment;', '\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);', '\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));', '}'].join('\\n'));\n  var saturation = new FunctionNode([// Algorithm from Chapter 16 of OpenGL Shading Language\n  'vec3 saturation(vec3 rgb, float adjustment) {', '\tvec3 intensity = vec3( luminance( rgb ) );', '\treturn mix( intensity, rgb, adjustment );', '}'].join('\\n'), [LuminanceNode.Nodes.luminance]); // include LuminanceNode function\n\n  var vibrance = new FunctionNode([// Shader by Evan Wallace adapted by @lo-th\n  'vec3 vibrance(vec3 rgb, float adjustment) {', '\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;', '\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));', '\tfloat amt = (mx - average) * (-3.0 * adjustment);', '\treturn mix(rgb.rgb, vec3(mx), amt);', '}'].join('\\n'));\n  return {\n    hue: hue,\n    saturation: saturation,\n    vibrance: vibrance\n  };\n}();\n\nColorAdjustmentNode.SATURATION = 'saturation';\nColorAdjustmentNode.HUE = 'hue';\nColorAdjustmentNode.VIBRANCE = 'vibrance';\nColorAdjustmentNode.BRIGHTNESS = 'brightness';\nColorAdjustmentNode.CONTRAST = 'contrast';\nColorAdjustmentNode.prototype = Object.create(TempNode.prototype);\nColorAdjustmentNode.prototype.constructor = ColorAdjustmentNode;\nColorAdjustmentNode.prototype.nodeType = 'ColorAdjustment';\nColorAdjustmentNode.prototype.hashProperties = ['method'];\n\nColorAdjustmentNode.prototype.generate = function (builder, output) {\n  var rgb = this.rgb.build(builder, 'v3'),\n      adjustment = this.adjustment.build(builder, 'f');\n\n  switch (this.method) {\n    case ColorAdjustmentNode.BRIGHTNESS:\n      return builder.format('( ' + rgb + ' + ' + adjustment + ' )', this.getType(builder), output);\n\n    case ColorAdjustmentNode.CONTRAST:\n      return builder.format('( ' + rgb + ' * ' + adjustment + ' )', this.getType(builder), output);\n  }\n\n  var method = builder.include(ColorAdjustmentNode.Nodes[this.method]);\n  return builder.format(method + '( ' + rgb + ', ' + adjustment + ' )', this.getType(builder), output);\n};\n\nColorAdjustmentNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.rgb = source.rgb;\n  this.adjustment = source.adjustment;\n  this.method = source.method;\n  return this;\n};\n\nColorAdjustmentNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.rgb = this.rgb.toJSON(meta).uuid;\n    data.adjustment = this.adjustment.toJSON(meta).uuid;\n    data.method = this.method;\n  }\n\n  return data;\n};\n\nexport { ColorAdjustmentNode };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}