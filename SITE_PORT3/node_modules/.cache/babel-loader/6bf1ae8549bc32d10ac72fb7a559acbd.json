{"ast":null,"code":"import { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { PositionNode } from './PositionNode.js';\nfunction CameraNode(scope, camera) {\n  TempNode.call(this, 'v3');\n  this.setScope(scope || CameraNode.POSITION);\n  this.setCamera(camera);\n}\nCameraNode.Nodes = function () {\n  var depthColor = new FunctionNode(['float depthColor( float mNear, float mFar ) {', '\t#ifdef USE_LOGDEPTHBUF_EXT', '\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;', '\t#else', '\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;', '\t#endif', '\treturn 1.0 - smoothstep( mNear, mFar, depth );', '}'].join('\\n'));\n  return {\n    depthColor: depthColor\n  };\n}();\nCameraNode.POSITION = 'position';\nCameraNode.DEPTH = 'depth';\nCameraNode.TO_VERTEX = 'toVertex';\nCameraNode.prototype = Object.create(TempNode.prototype);\nCameraNode.prototype.constructor = CameraNode;\nCameraNode.prototype.nodeType = 'Camera';\nCameraNode.prototype.setCamera = function (camera) {\n  this.camera = camera;\n  this.updateFrame = camera !== undefined ? this.onUpdateFrame : undefined;\n};\nCameraNode.prototype.setScope = function (scope) {\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n      delete this.near;\n      delete this.far;\n      break;\n  }\n  this.scope = scope;\n  switch (scope) {\n    case CameraNode.DEPTH:\n      var camera = this.camera;\n      this.near = new FloatNode(camera ? camera.near : 1);\n      this.far = new FloatNode(camera ? camera.far : 1200);\n      break;\n  }\n};\nCameraNode.prototype.getType = function () /* builder */\n{\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n      return 'f';\n  }\n  return this.type;\n};\nCameraNode.prototype.getUnique = function () /* builder */\n{\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n    case CameraNode.TO_VERTEX:\n      return true;\n  }\n  return false;\n};\nCameraNode.prototype.getShared = function () /* builder */\n{\n  switch (this.scope) {\n    case CameraNode.POSITION:\n      return false;\n  }\n  return true;\n};\nCameraNode.prototype.generate = function (builder, output) {\n  var result;\n  switch (this.scope) {\n    case CameraNode.POSITION:\n      result = 'cameraPosition';\n      break;\n    case CameraNode.DEPTH:\n      var depthColor = builder.include(CameraNode.Nodes.depthColor);\n      result = depthColor + '( ' + this.near.build(builder, 'f') + ', ' + this.far.build(builder, 'f') + ' )';\n      break;\n    case CameraNode.TO_VERTEX:\n      result = 'normalize( ' + new PositionNode(PositionNode.WORLD).build(builder, 'v3') + ' - cameraPosition )';\n      break;\n  }\n  return builder.format(result, this.getType(builder), output);\n};\nCameraNode.prototype.onUpdateFrame = function () /* frame */\n{\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n      var camera = this.camera;\n      this.near.value = camera.near;\n      this.far.value = camera.far;\n      break;\n  }\n};\nCameraNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.setScope(source.scope);\n  if (source.camera) {\n    this.setCamera(source.camera);\n  }\n  switch (source.scope) {\n    case CameraNode.DEPTH:\n      this.near.number = source.near;\n      this.far.number = source.far;\n      break;\n  }\n  return this;\n};\nCameraNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.scope = this.scope;\n    if (this.camera) data.camera = this.camera.uuid;\n    switch (this.scope) {\n      case CameraNode.DEPTH:\n        data.near = this.near.value;\n        data.far = this.far.value;\n        break;\n    }\n  }\n  return data;\n};\nexport { CameraNode };","map":{"version":3,"names":["TempNode","FunctionNode","FloatNode","PositionNode","CameraNode","scope","camera","call","setScope","POSITION","setCamera","Nodes","depthColor","join","DEPTH","TO_VERTEX","prototype","Object","create","constructor","nodeType","updateFrame","undefined","onUpdateFrame","near","far","getType","type","getUnique","getShared","generate","builder","output","result","include","build","WORLD","format","value","copy","source","number","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"sources":["C:/Users/drncs/OneDrive/√Årea de Trabalho/PORTIFOLIO/SITE3/node_modules/three-stdlib/nodes/accessors/CameraNode.js"],"sourcesContent":["import { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { PositionNode } from './PositionNode.js';\n\nfunction CameraNode(scope, camera) {\n  TempNode.call(this, 'v3');\n  this.setScope(scope || CameraNode.POSITION);\n  this.setCamera(camera);\n}\n\nCameraNode.Nodes = function () {\n  var depthColor = new FunctionNode(['float depthColor( float mNear, float mFar ) {', '\t#ifdef USE_LOGDEPTHBUF_EXT', '\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;', '\t#else', '\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;', '\t#endif', '\treturn 1.0 - smoothstep( mNear, mFar, depth );', '}'].join('\\n'));\n  return {\n    depthColor: depthColor\n  };\n}();\n\nCameraNode.POSITION = 'position';\nCameraNode.DEPTH = 'depth';\nCameraNode.TO_VERTEX = 'toVertex';\nCameraNode.prototype = Object.create(TempNode.prototype);\nCameraNode.prototype.constructor = CameraNode;\nCameraNode.prototype.nodeType = 'Camera';\n\nCameraNode.prototype.setCamera = function (camera) {\n  this.camera = camera;\n  this.updateFrame = camera !== undefined ? this.onUpdateFrame : undefined;\n};\n\nCameraNode.prototype.setScope = function (scope) {\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n      delete this.near;\n      delete this.far;\n      break;\n  }\n\n  this.scope = scope;\n\n  switch (scope) {\n    case CameraNode.DEPTH:\n      var camera = this.camera;\n      this.near = new FloatNode(camera ? camera.near : 1);\n      this.far = new FloatNode(camera ? camera.far : 1200);\n      break;\n  }\n};\n\nCameraNode.prototype.getType = function ()\n/* builder */\n{\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n      return 'f';\n  }\n\n  return this.type;\n};\n\nCameraNode.prototype.getUnique = function ()\n/* builder */\n{\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n    case CameraNode.TO_VERTEX:\n      return true;\n  }\n\n  return false;\n};\n\nCameraNode.prototype.getShared = function ()\n/* builder */\n{\n  switch (this.scope) {\n    case CameraNode.POSITION:\n      return false;\n  }\n\n  return true;\n};\n\nCameraNode.prototype.generate = function (builder, output) {\n  var result;\n\n  switch (this.scope) {\n    case CameraNode.POSITION:\n      result = 'cameraPosition';\n      break;\n\n    case CameraNode.DEPTH:\n      var depthColor = builder.include(CameraNode.Nodes.depthColor);\n      result = depthColor + '( ' + this.near.build(builder, 'f') + ', ' + this.far.build(builder, 'f') + ' )';\n      break;\n\n    case CameraNode.TO_VERTEX:\n      result = 'normalize( ' + new PositionNode(PositionNode.WORLD).build(builder, 'v3') + ' - cameraPosition )';\n      break;\n  }\n\n  return builder.format(result, this.getType(builder), output);\n};\n\nCameraNode.prototype.onUpdateFrame = function ()\n/* frame */\n{\n  switch (this.scope) {\n    case CameraNode.DEPTH:\n      var camera = this.camera;\n      this.near.value = camera.near;\n      this.far.value = camera.far;\n      break;\n  }\n};\n\nCameraNode.prototype.copy = function (source) {\n  TempNode.prototype.copy.call(this, source);\n  this.setScope(source.scope);\n\n  if (source.camera) {\n    this.setCamera(source.camera);\n  }\n\n  switch (source.scope) {\n    case CameraNode.DEPTH:\n      this.near.number = source.near;\n      this.far.number = source.far;\n      break;\n  }\n\n  return this;\n};\n\nCameraNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.scope = this.scope;\n    if (this.camera) data.camera = this.camera.uuid;\n\n    switch (this.scope) {\n      case CameraNode.DEPTH:\n        data.near = this.near.value;\n        data.far = this.far.value;\n        break;\n    }\n  }\n\n  return data;\n};\n\nexport { CameraNode };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}