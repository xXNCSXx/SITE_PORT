{"ast":null,"code":"import { Node } from '../../core/Node.js';\nimport { ColorNode } from '../../inputs/ColorNode.js';\nfunction BasicNode() {\n  Node.call(this);\n  this.color = new ColorNode(0xffffff);\n}\nBasicNode.prototype = Object.create(Node.prototype);\nBasicNode.prototype.constructor = BasicNode;\nBasicNode.prototype.nodeType = 'Basic';\nBasicNode.prototype.generate = function (builder) {\n  var code;\n  if (builder.isShader('vertex')) {\n    var position = this.position ? this.position.analyzeAndFlow(builder, 'v3', {\n      cache: 'position'\n    }) : undefined;\n    builder.addParsCode(['varying vec3 vViewPosition;', '#ifndef FLAT_SHADED', ' varying vec3 vNormal;', '#endif'].join('\\n'));\n    var output = ['#include <beginnormal_vertex>', '#include <defaultnormal_vertex>', '#ifndef FLAT_SHADED',\n    // Normal computed with derivatives when FLAT_SHADED\n    ' vNormal = normalize( transformedNormal );', '#endif', '#include <begin_vertex>'];\n    if (position) {\n      output.push(position.code, position.result ? 'transformed = ' + position.result + ';' : '');\n    }\n    output.push('#include <morphtarget_vertex>', '#include <skinning_vertex>', '#include <project_vertex>', '#include <fog_vertex>', '#include <logdepthbuf_vertex>', '#include <clipping_planes_vertex>', '\tvViewPosition = - mvPosition.xyz;', '#include <worldpos_vertex>', '#include <shadowmap_vertex>');\n    code = output.join('\\n');\n  } else {\n    // Analyze all nodes to reuse generate codes\n    this.color.analyze(builder, {\n      slot: 'color'\n    });\n    if (this.alpha) this.alpha.analyze(builder);\n    if (this.mask) this.mask.analyze(builder); // Build code\n\n    var color = this.color.flow(builder, 'c', {\n      slot: 'color'\n    });\n    var alpha = this.alpha ? this.alpha.flow(builder, 'f') : undefined;\n    var mask = this.mask ? this.mask.flow(builder, 'b') : undefined;\n    builder.requires.transparent = alpha !== undefined;\n    builder.addParsCode(['varying vec3 vViewPosition;', '#ifndef FLAT_SHADED', ' varying vec3 vNormal;', '#endif'].join('\\n'));\n    var output = [\n    // add before: prevent undeclared normal\n    '#include <normal_fragment_begin>', color.code];\n    if (mask) {\n      output.push(mask.code, 'if ( ! ' + mask.result + ' ) discard;');\n    }\n    if (alpha) {\n      output.push(alpha.code, '#ifdef ALPHATEST', ' if ( ' + alpha.result + ' <= ALPHATEST ) discard;', '#endif');\n    }\n    if (alpha) {\n      output.push('gl_FragColor = vec4(' + color.result + ', ' + alpha.result + ' );');\n    } else {\n      output.push('gl_FragColor = vec4(' + color.result + ', 1.0 );');\n    }\n    code = output.join('\\n');\n  }\n  return code;\n};\nBasicNode.prototype.copy = function (source) {\n  Node.prototype.copy.call(this, source);\n  this.color = source.color;\n  if (source.position) this.position = source.position;\n  if (source.alpha) this.alpha = source.alpha;\n  if (source.mask) this.mask = source.mask;\n  return this;\n};\nBasicNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.color = this.color.toJSON(meta).uuid;\n    if (this.position) data.position = this.position.toJSON(meta).uuid;\n    if (this.alpha) data.alpha = this.alpha.toJSON(meta).uuid;\n    if (this.mask) data.mask = this.mask.toJSON(meta).uuid;\n  }\n  return data;\n};\nexport { BasicNode };","map":{"version":3,"names":["Node","ColorNode","BasicNode","call","color","prototype","Object","create","constructor","nodeType","generate","builder","code","isShader","position","analyzeAndFlow","cache","undefined","addParsCode","join","output","push","result","analyze","slot","alpha","mask","flow","requires","transparent","copy","source","toJSON","meta","data","getJSONNode","createJSONNode","uuid"],"sources":["C:/Users/drncs/OneDrive/Ãrea de Trabalho/PORTIFOLIO/SITE3/node_modules/three-stdlib/nodes/materials/nodes/BasicNode.js"],"sourcesContent":["import { Node } from '../../core/Node.js';\nimport { ColorNode } from '../../inputs/ColorNode.js';\n\nfunction BasicNode() {\n  Node.call(this);\n  this.color = new ColorNode(0xffffff);\n}\n\nBasicNode.prototype = Object.create(Node.prototype);\nBasicNode.prototype.constructor = BasicNode;\nBasicNode.prototype.nodeType = 'Basic';\n\nBasicNode.prototype.generate = function (builder) {\n  var code;\n\n  if (builder.isShader('vertex')) {\n    var position = this.position ? this.position.analyzeAndFlow(builder, 'v3', {\n      cache: 'position'\n    }) : undefined;\n    builder.addParsCode(['varying vec3 vViewPosition;', '#ifndef FLAT_SHADED', ' varying vec3 vNormal;', '#endif'].join('\\n'));\n    var output = ['#include <beginnormal_vertex>', '#include <defaultnormal_vertex>', '#ifndef FLAT_SHADED', // Normal computed with derivatives when FLAT_SHADED\n    ' vNormal = normalize( transformedNormal );', '#endif', '#include <begin_vertex>'];\n\n    if (position) {\n      output.push(position.code, position.result ? 'transformed = ' + position.result + ';' : '');\n    }\n\n    output.push('#include <morphtarget_vertex>', '#include <skinning_vertex>', '#include <project_vertex>', '#include <fog_vertex>', '#include <logdepthbuf_vertex>', '#include <clipping_planes_vertex>', '\tvViewPosition = - mvPosition.xyz;', '#include <worldpos_vertex>', '#include <shadowmap_vertex>');\n    code = output.join('\\n');\n  } else {\n    // Analyze all nodes to reuse generate codes\n    this.color.analyze(builder, {\n      slot: 'color'\n    });\n    if (this.alpha) this.alpha.analyze(builder);\n    if (this.mask) this.mask.analyze(builder); // Build code\n\n    var color = this.color.flow(builder, 'c', {\n      slot: 'color'\n    });\n    var alpha = this.alpha ? this.alpha.flow(builder, 'f') : undefined;\n    var mask = this.mask ? this.mask.flow(builder, 'b') : undefined;\n    builder.requires.transparent = alpha !== undefined;\n    builder.addParsCode(['varying vec3 vViewPosition;', '#ifndef FLAT_SHADED', ' varying vec3 vNormal;', '#endif'].join('\\n'));\n    var output = [// add before: prevent undeclared normal\n    '#include <normal_fragment_begin>', color.code];\n\n    if (mask) {\n      output.push(mask.code, 'if ( ! ' + mask.result + ' ) discard;');\n    }\n\n    if (alpha) {\n      output.push(alpha.code, '#ifdef ALPHATEST', ' if ( ' + alpha.result + ' <= ALPHATEST ) discard;', '#endif');\n    }\n\n    if (alpha) {\n      output.push('gl_FragColor = vec4(' + color.result + ', ' + alpha.result + ' );');\n    } else {\n      output.push('gl_FragColor = vec4(' + color.result + ', 1.0 );');\n    }\n\n    code = output.join('\\n');\n  }\n\n  return code;\n};\n\nBasicNode.prototype.copy = function (source) {\n  Node.prototype.copy.call(this, source);\n  this.color = source.color;\n  if (source.position) this.position = source.position;\n  if (source.alpha) this.alpha = source.alpha;\n  if (source.mask) this.mask = source.mask;\n  return this;\n};\n\nBasicNode.prototype.toJSON = function (meta) {\n  var data = this.getJSONNode(meta);\n\n  if (!data) {\n    data = this.createJSONNode(meta);\n    data.color = this.color.toJSON(meta).uuid;\n    if (this.position) data.position = this.position.toJSON(meta).uuid;\n    if (this.alpha) data.alpha = this.alpha.toJSON(meta).uuid;\n    if (this.mask) data.mask = this.mask.toJSON(meta).uuid;\n  }\n\n  return data;\n};\n\nexport { BasicNode };\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,oBAAoB;AACzC,SAASC,SAAS,QAAQ,2BAA2B;AAErD,SAASC,SAASA,CAAA,EAAG;EACnBF,IAAI,CAACG,IAAI,CAAC,IAAI,CAAC;EACf,IAAI,CAACC,KAAK,GAAG,IAAIH,SAAS,CAAC,QAAQ,CAAC;AACtC;AAEAC,SAAS,CAACG,SAAS,GAAGC,MAAM,CAACC,MAAM,CAACP,IAAI,CAACK,SAAS,CAAC;AACnDH,SAAS,CAACG,SAAS,CAACG,WAAW,GAAGN,SAAS;AAC3CA,SAAS,CAACG,SAAS,CAACI,QAAQ,GAAG,OAAO;AAEtCP,SAAS,CAACG,SAAS,CAACK,QAAQ,GAAG,UAAUC,OAAO,EAAE;EAChD,IAAIC,IAAI;EAER,IAAID,OAAO,CAACE,QAAQ,CAAC,QAAQ,CAAC,EAAE;IAC9B,IAAIC,QAAQ,GAAG,IAAI,CAACA,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACC,cAAc,CAACJ,OAAO,EAAE,IAAI,EAAE;MACzEK,KAAK,EAAE;IACT,CAAC,CAAC,GAAGC,SAAS;IACdN,OAAO,CAACO,WAAW,CAAC,CAAC,6BAA6B,EAAE,qBAAqB,EAAE,wBAAwB,EAAE,QAAQ,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1H,IAAIC,MAAM,GAAG,CAAC,+BAA+B,EAAE,iCAAiC,EAAE,qBAAqB;IAAE;IACzG,4CAA4C,EAAE,QAAQ,EAAE,yBAAyB,CAAC;IAElF,IAAIN,QAAQ,EAAE;MACZM,MAAM,CAACC,IAAI,CAACP,QAAQ,CAACF,IAAI,EAAEE,QAAQ,CAACQ,MAAM,GAAG,gBAAgB,GAAGR,QAAQ,CAACQ,MAAM,GAAG,GAAG,GAAG,EAAE,CAAC;IAC7F;IAEAF,MAAM,CAACC,IAAI,CAAC,+BAA+B,EAAE,4BAA4B,EAAE,2BAA2B,EAAE,uBAAuB,EAAE,+BAA+B,EAAE,mCAAmC,EAAE,oCAAoC,EAAE,4BAA4B,EAAE,6BAA6B,CAAC;IACzST,IAAI,GAAGQ,MAAM,CAACD,IAAI,CAAC,IAAI,CAAC;EAC1B,CAAC,MAAM;IACL;IACA,IAAI,CAACf,KAAK,CAACmB,OAAO,CAACZ,OAAO,EAAE;MAC1Ba,IAAI,EAAE;IACR,CAAC,CAAC;IACF,IAAI,IAAI,CAACC,KAAK,EAAE,IAAI,CAACA,KAAK,CAACF,OAAO,CAACZ,OAAO,CAAC;IAC3C,IAAI,IAAI,CAACe,IAAI,EAAE,IAAI,CAACA,IAAI,CAACH,OAAO,CAACZ,OAAO,CAAC,CAAC,CAAC;;IAE3C,IAAIP,KAAK,GAAG,IAAI,CAACA,KAAK,CAACuB,IAAI,CAAChB,OAAO,EAAE,GAAG,EAAE;MACxCa,IAAI,EAAE;IACR,CAAC,CAAC;IACF,IAAIC,KAAK,GAAG,IAAI,CAACA,KAAK,GAAG,IAAI,CAACA,KAAK,CAACE,IAAI,CAAChB,OAAO,EAAE,GAAG,CAAC,GAAGM,SAAS;IAClE,IAAIS,IAAI,GAAG,IAAI,CAACA,IAAI,GAAG,IAAI,CAACA,IAAI,CAACC,IAAI,CAAChB,OAAO,EAAE,GAAG,CAAC,GAAGM,SAAS;IAC/DN,OAAO,CAACiB,QAAQ,CAACC,WAAW,GAAGJ,KAAK,KAAKR,SAAS;IAClDN,OAAO,CAACO,WAAW,CAAC,CAAC,6BAA6B,EAAE,qBAAqB,EAAE,wBAAwB,EAAE,QAAQ,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1H,IAAIC,MAAM,GAAG;IAAC;IACd,kCAAkC,EAAEhB,KAAK,CAACQ,IAAI,CAAC;IAE/C,IAAIc,IAAI,EAAE;MACRN,MAAM,CAACC,IAAI,CAACK,IAAI,CAACd,IAAI,EAAE,SAAS,GAAGc,IAAI,CAACJ,MAAM,GAAG,aAAa,CAAC;IACjE;IAEA,IAAIG,KAAK,EAAE;MACTL,MAAM,CAACC,IAAI,CAACI,KAAK,CAACb,IAAI,EAAE,kBAAkB,EAAE,QAAQ,GAAGa,KAAK,CAACH,MAAM,GAAG,0BAA0B,EAAE,QAAQ,CAAC;IAC7G;IAEA,IAAIG,KAAK,EAAE;MACTL,MAAM,CAACC,IAAI,CAAC,sBAAsB,GAAGjB,KAAK,CAACkB,MAAM,GAAG,IAAI,GAAGG,KAAK,CAACH,MAAM,GAAG,KAAK,CAAC;IAClF,CAAC,MAAM;MACLF,MAAM,CAACC,IAAI,CAAC,sBAAsB,GAAGjB,KAAK,CAACkB,MAAM,GAAG,UAAU,CAAC;IACjE;IAEAV,IAAI,GAAGQ,MAAM,CAACD,IAAI,CAAC,IAAI,CAAC;EAC1B;EAEA,OAAOP,IAAI;AACb,CAAC;AAEDV,SAAS,CAACG,SAAS,CAACyB,IAAI,GAAG,UAAUC,MAAM,EAAE;EAC3C/B,IAAI,CAACK,SAAS,CAACyB,IAAI,CAAC3B,IAAI,CAAC,IAAI,EAAE4B,MAAM,CAAC;EACtC,IAAI,CAAC3B,KAAK,GAAG2B,MAAM,CAAC3B,KAAK;EACzB,IAAI2B,MAAM,CAACjB,QAAQ,EAAE,IAAI,CAACA,QAAQ,GAAGiB,MAAM,CAACjB,QAAQ;EACpD,IAAIiB,MAAM,CAACN,KAAK,EAAE,IAAI,CAACA,KAAK,GAAGM,MAAM,CAACN,KAAK;EAC3C,IAAIM,MAAM,CAACL,IAAI,EAAE,IAAI,CAACA,IAAI,GAAGK,MAAM,CAACL,IAAI;EACxC,OAAO,IAAI;AACb,CAAC;AAEDxB,SAAS,CAACG,SAAS,CAAC2B,MAAM,GAAG,UAAUC,IAAI,EAAE;EAC3C,IAAIC,IAAI,GAAG,IAAI,CAACC,WAAW,CAACF,IAAI,CAAC;EAEjC,IAAI,CAACC,IAAI,EAAE;IACTA,IAAI,GAAG,IAAI,CAACE,cAAc,CAACH,IAAI,CAAC;IAChCC,IAAI,CAAC9B,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC4B,MAAM,CAACC,IAAI,CAAC,CAACI,IAAI;IACzC,IAAI,IAAI,CAACvB,QAAQ,EAAEoB,IAAI,CAACpB,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACkB,MAAM,CAACC,IAAI,CAAC,CAACI,IAAI;IAClE,IAAI,IAAI,CAACZ,KAAK,EAAES,IAAI,CAACT,KAAK,GAAG,IAAI,CAACA,KAAK,CAACO,MAAM,CAACC,IAAI,CAAC,CAACI,IAAI;IACzD,IAAI,IAAI,CAACX,IAAI,EAAEQ,IAAI,CAACR,IAAI,GAAG,IAAI,CAACA,IAAI,CAACM,MAAM,CAACC,IAAI,CAAC,CAACI,IAAI;EACxD;EAEA,OAAOH,IAAI;AACb,CAAC;AAED,SAAShC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}