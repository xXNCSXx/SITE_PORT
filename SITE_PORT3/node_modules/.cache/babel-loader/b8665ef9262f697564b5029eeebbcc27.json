{"ast":null,"code":"import { Loader, FileLoader, LoadingManager, Group } from 'three';\nimport { ColladaLoader } from './ColladaLoader.js';\nimport { unzipSync } from 'fflate';\nvar KMZLoader = function (manager) {\n  Loader.call(this, manager);\n};\nKMZLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: KMZLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    var scope = this;\n    var loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.setResponseType('arraybuffer');\n    loader.setRequestHeader(scope.requestHeader);\n    loader.setWithCredentials(scope.withCredentials);\n    loader.load(url, function (text) {\n      try {\n        onLoad(scope.parse(text));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n        scope.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  },\n  parse: function (data) {\n    function findFile(url) {\n      for (let path in zip) {\n        if (path.substr(-url.length) === url) {\n          return zip[path];\n        }\n      }\n    }\n    var manager = new LoadingManager();\n    manager.setURLModifier(function (url) {\n      var image = findFile(url);\n      if (image) {\n        console.log('Loading', url);\n        var blob = new Blob([image.buffer], {\n          type: 'application/octet-stream'\n        });\n        return URL.createObjectURL(blob);\n      }\n      return url;\n    }); //\n\n    var zip = unzipSync(new Uint8Array(data)); // eslint-disable-line no-undef\n\n    if (zip['doc.kml']) {\n      var xml = new DOMParser().parseFromString(fflate.strFromU8(zip['doc.kml']), 'application/xml'); // eslint-disable-line no-undef\n\n      var model = xml.querySelector('Placemark Model Link href');\n      if (model) {\n        var loader = new ColladaLoader(manager);\n        return loader.parse(fflate.strFromU8(zip[model.textContent])); // eslint-disable-line no-undef\n      }\n    } else {\n      console.warn('KMZLoader: Missing doc.kml file.');\n      for (let path in zip) {\n        var extension = path.split('.').pop().toLowerCase();\n        if (extension === 'dae') {\n          var loader = new ColladaLoader(manager);\n          return loader.parse(fflate.strFromU8(zip[path])); // eslint-disable-line no-undef\n        }\n      }\n    }\n    console.error(\"KMZLoader: Couldn't find .dae file.\");\n    return {\n      scene: new Group()\n    };\n  }\n});\nexport { KMZLoader };","map":{"version":3,"names":["Loader","FileLoader","LoadingManager","Group","ColladaLoader","unzipSync","KMZLoader","manager","call","prototype","Object","assign","create","constructor","load","url","onLoad","onProgress","onError","scope","loader","setPath","path","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","text","parse","e","console","error","itemError","data","findFile","zip","substr","length","setURLModifier","image","log","blob","Blob","buffer","type","URL","createObjectURL","Uint8Array","xml","DOMParser","parseFromString","fflate","strFromU8","model","querySelector","textContent","warn","extension","split","pop","toLowerCase","scene"],"sources":["C:/Users/drncs/OneDrive/√Årea de Trabalho/PORTIFOLIO/SITE3/node_modules/three-stdlib/loaders/KMZLoader.js"],"sourcesContent":["import { Loader, FileLoader, LoadingManager, Group } from 'three';\nimport { ColladaLoader } from './ColladaLoader.js';\nimport { unzipSync } from 'fflate';\n\nvar KMZLoader = function (manager) {\n  Loader.call(this, manager);\n};\n\nKMZLoader.prototype = Object.assign(Object.create(Loader.prototype), {\n  constructor: KMZLoader,\n  load: function (url, onLoad, onProgress, onError) {\n    var scope = this;\n    var loader = new FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.setResponseType('arraybuffer');\n    loader.setRequestHeader(scope.requestHeader);\n    loader.setWithCredentials(scope.withCredentials);\n    loader.load(url, function (text) {\n      try {\n        onLoad(scope.parse(text));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  },\n  parse: function (data) {\n    function findFile(url) {\n      for (let path in zip) {\n        if (path.substr(-url.length) === url) {\n          return zip[path];\n        }\n      }\n    }\n\n    var manager = new LoadingManager();\n    manager.setURLModifier(function (url) {\n      var image = findFile(url);\n\n      if (image) {\n        console.log('Loading', url);\n        var blob = new Blob([image.buffer], {\n          type: 'application/octet-stream'\n        });\n        return URL.createObjectURL(blob);\n      }\n\n      return url;\n    }); //\n\n    var zip = unzipSync(new Uint8Array(data)); // eslint-disable-line no-undef\n\n    if (zip['doc.kml']) {\n      var xml = new DOMParser().parseFromString(fflate.strFromU8(zip['doc.kml']), 'application/xml'); // eslint-disable-line no-undef\n\n      var model = xml.querySelector('Placemark Model Link href');\n\n      if (model) {\n        var loader = new ColladaLoader(manager);\n        return loader.parse(fflate.strFromU8(zip[model.textContent])); // eslint-disable-line no-undef\n      }\n    } else {\n      console.warn('KMZLoader: Missing doc.kml file.');\n\n      for (let path in zip) {\n        var extension = path.split('.').pop().toLowerCase();\n\n        if (extension === 'dae') {\n          var loader = new ColladaLoader(manager);\n          return loader.parse(fflate.strFromU8(zip[path])); // eslint-disable-line no-undef\n        }\n      }\n    }\n\n    console.error(\"KMZLoader: Couldn't find .dae file.\");\n    return {\n      scene: new Group()\n    };\n  }\n});\n\nexport { KMZLoader };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}