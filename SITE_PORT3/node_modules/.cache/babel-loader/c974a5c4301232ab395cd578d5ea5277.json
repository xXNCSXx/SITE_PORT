{"ast":null,"code":"import { defaults, forEach } from \"../../../utils/utils\";\nimport { resolveGrammar as orgResolveGrammar } from \"../resolver\";\nimport { validateGrammar as orgValidateGrammar } from \"../checks\";\nimport { defaultGrammarResolverErrorProvider, defaultGrammarValidatorErrorProvider } from \"../../errors_public\";\nimport { DslMethodsCollectorVisitor } from \"./gast\";\nexport function resolveGrammar(options) {\n  options = defaults(options, {\n    errMsgProvider: defaultGrammarResolverErrorProvider\n  });\n  var topRulesTable = {};\n  forEach(options.rules, function (rule) {\n    topRulesTable[rule.name] = rule;\n  });\n  return orgResolveGrammar(topRulesTable, options.errMsgProvider);\n}\nexport function validateGrammar(options) {\n  options = defaults(options, {\n    errMsgProvider: defaultGrammarValidatorErrorProvider\n  });\n  return orgValidateGrammar(options.rules, options.maxLookahead, options.tokenTypes, options.errMsgProvider, options.grammarName);\n}\nexport function assignOccurrenceIndices(options) {\n  forEach(options.rules, function (currRule) {\n    var methodsCollector = new DslMethodsCollectorVisitor();\n    currRule.accept(methodsCollector);\n    forEach(methodsCollector.dslMethods, function (methods) {\n      forEach(methods, function (currMethod, arrIdx) {\n        currMethod.idx = arrIdx + 1;\n      });\n    });\n  });\n}","map":{"version":3,"names":["defaults","forEach","resolveGrammar","orgResolveGrammar","validateGrammar","orgValidateGrammar","defaultGrammarResolverErrorProvider","defaultGrammarValidatorErrorProvider","DslMethodsCollectorVisitor","options","errMsgProvider","topRulesTable","rules","rule","name","maxLookahead","tokenTypes","grammarName","assignOccurrenceIndices","currRule","methodsCollector","accept","dslMethods","methods","currMethod","arrIdx","idx"],"sources":["../../../../../src/parse/grammar/gast/gast_resolver_public.ts"],"sourcesContent":[null],"mappings":"AAEA,SAASA,QAAQ,EAAEC,OAAO,QAAQ,sBAAsB;AACxD,SAASC,cAAc,IAAIC,iBAAiB,QAAQ,aAAa;AACjE,SAASC,eAAe,IAAIC,kBAAkB,QAAQ,WAAW;AACjE,SACEC,mCAAmC,EACnCC,oCAAoC,QAC/B,qBAAqB;AAC5B,SAASC,0BAA0B,QAAQ,QAAQ;AASnD,OAAM,SAAUN,cAAcA,CAACO,OAG9B;EACCA,OAAO,GAAGT,QAAQ,CAACS,OAAO,EAAE;IAC1BC,cAAc,EAAEJ;GACjB,CAAC;EAEF,IAAMK,aAAa,GAAG,EAAE;EACxBV,OAAO,CAACQ,OAAO,CAACG,KAAK,EAAE,UAACC,IAAI;IAC1BF,aAAa,CAACE,IAAI,CAACC,IAAI,CAAC,GAAGD,IAAI;EACjC,CAAC,CAAC;EACF,OAAOV,iBAAiB,CAACQ,aAAa,EAAEF,OAAO,CAACC,cAAc,CAAC;AACjE;AAEA,OAAM,SAAUN,eAAeA,CAACK,OAM/B;EACCA,OAAO,GAAGT,QAAQ,CAACS,OAAO,EAAE;IAC1BC,cAAc,EAAEH;GACjB,CAAC;EAEF,OAAOF,kBAAkB,CACvBI,OAAO,CAACG,KAAK,EACbH,OAAO,CAACM,YAAY,EACpBN,OAAO,CAACO,UAAU,EAClBP,OAAO,CAACC,cAAc,EACtBD,OAAO,CAACQ,WAAW,CACpB;AACH;AAEA,OAAM,SAAUC,uBAAuBA,CAACT,OAA0B;EAChER,OAAO,CAACQ,OAAO,CAACG,KAAK,EAAE,UAACO,QAAQ;IAC9B,IAAMC,gBAAgB,GAAG,IAAIZ,0BAA0B,EAAE;IACzDW,QAAQ,CAACE,MAAM,CAACD,gBAAgB,CAAC;IACjCnB,OAAO,CAACmB,gBAAgB,CAACE,UAAU,EAAE,UAACC,OAAO;MAC3CtB,OAAO,CAACsB,OAAO,EAAE,UAACC,UAAqC,EAAEC,MAAM;QAC7DD,UAAU,CAACE,GAAG,GAAGD,MAAM,GAAG,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module"}