"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),n=require("react"),r=require("yoga-layout-prebuilt"),i=require("@react-three/fiber"),a=require("three");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=o(e),s=o(t),l=o(n),f=o(r),d=function(e){return e[0].toUpperCase()+e.slice(1)},c=function(e){return e.toUpperCase().replace("-","_")},g=function(e,t,n){return Object.keys(t).forEach((function(r){var i=t[r];if("string"==typeof i)switch(r){case"flexDir":case"dir":case"flexDirection":return e.setFlexDirection(f.default["FLEX_DIRECTION_"+c(i)]);case"align":case"alignItems":return e.setAlignItems(f.default["ALIGN_"+c(i)]);case"justify":case"justifyContent":return e.setJustifyContent(f.default["JUSTIFY_"+c(i)]);case"wrap":case"flexWrap":return e.setFlexWrap(f.default["WRAP_"+c(i)]);case"basis":case"flexBasis":return e.setFlexBasis(i);default:return e["set"+d(r)](i)}else if("number"==typeof i){var a=i*n;switch(r){case"basis":case"flexBasis":return e.setFlexBasis(a);case"grow":case"flexGrow":return e.setFlexGrow(a);case"shrink":case"flexShrink":return e.setFlexShrink(a);case"align":return e.setAlignItems(i);case"justify":return e.setJustifyContent(i);case"flexDir":case"dir":return e.setFlexDirection(i);case"wrap":return e.setFlexWrap(i);case"padding":case"p":return e.setPadding(f.default.EDGE_ALL,a);case"paddingLeft":case"pl":return e.setPadding(f.default.EDGE_LEFT,a);case"paddingRight":case"pr":return e.setPadding(f.default.EDGE_RIGHT,a);case"paddingTop":case"pt":return e.setPadding(f.default.EDGE_TOP,a);case"paddingBottom":case"pb":return e.setPadding(f.default.EDGE_BOTTOM,a);case"margin":case"m":return e.setMargin(f.default.EDGE_ALL,a);case"marginLeft":case"ml":return e.setMargin(f.default.EDGE_LEFT,a);case"marginRight":case"mr":return e.setMargin(f.default.EDGE_RIGHT,a);case"marginTop":case"mt":return e.setMargin(f.default.EDGE_TOP,a);case"marginBottom":case"mb":return e.setMargin(f.default.EDGE_BOTTOM,a);default:return e["set"+d(r)](a)}}}))};var m=function(e){return Object.keys(e).forEach((function(t){return void 0===e[t]?delete e[t]:{}}))},p={scaleFactor:100,requestReflow:function(){console.warn("Flex not initialized! Please report")},registerBox:function(){console.warn("Flex not initialized! Please report")},unregisterBox:function(){console.warn("Flex not initialized! Please report")}},h=n.createContext(p),x={node:null,size:[0,0]},w=n.createContext(x);function y(e){var t=n.useContext(e);return t||console.warn("You must place this hook/component under a <Flex/> component!"),t}function b(){return y(h).requestReflow}exports.Box=function(e){var t=e.children,r=e.centerAnchor,a=e.flexDirection,o=e.flexDir,d=e.dir,c=e.alignContent,p=e.alignItems,x=e.alignSelf,v=e.align,E=e.justifyContent,B=e.justify,C=e.flexBasis,D=e.basis,L=e.flexGrow,R=e.grow,T=e.flexShrink,F=e.shrink,W=e.flexWrap,M=e.wrap,j=e.margin,k=e.m,G=e.marginBottom,I=e.marginLeft,_=e.marginRight,P=e.marginTop,S=e.mb,z=e.ml,H=e.mr,O=e.mt,A=e.padding,q=e.p,N=e.paddingBottom,J=e.paddingLeft,U=e.paddingRight,V=e.paddingTop,Y=e.pb,X=e.pl,K=e.pr,Q=e.pt,Z=e.height,$=e.width,ee=e.maxHeight,te=e.maxWidth,ne=e.minHeight,re=e.minWidth,ie=s.default(e,["children","centerAnchor","flexDirection","flexDir","dir","alignContent","alignItems","alignSelf","align","justifyContent","justify","flexBasis","basis","flexGrow","grow","flexShrink","shrink","flexWrap","wrap","margin","m","marginBottom","marginLeft","marginRight","marginTop","mb","ml","mr","mt","padding","p","paddingBottom","paddingLeft","paddingRight","paddingTop","pb","pl","pr","pt","height","width","maxHeight","maxWidth","minHeight","minWidth"]),ae=n.useMemo((function(){var e={flexDirection:a,flexDir:o,dir:d,alignContent:c,alignItems:p,alignSelf:x,align:v,justifyContent:E,justify:B,flexBasis:C,basis:D,flexGrow:L,grow:R,flexShrink:T,shrink:F,flexWrap:W,wrap:M,margin:j,m:k,marginBottom:G,marginLeft:I,marginRight:_,marginTop:P,mb:S,ml:z,mr:H,mt:O,padding:A,p:q,paddingBottom:N,paddingLeft:J,paddingRight:U,paddingTop:V,pb:Y,pl:X,pr:K,pt:Q,height:Z,width:$,maxHeight:ee,maxWidth:te,minHeight:ne,minWidth:re};return m(e),e}),[v,c,p,x,d,C,D,o,a,L,R,T,F,W,Z,B,E,k,j,G,I,_,P,ee,te,S,ne,re,z,H,O,q,A,N,J,U,V,Y,X,K,Q,$,M]),oe=y(h),ue=oe.registerBox,se=oe.unregisterBox,le=oe.scaleFactor,fe=y(w).node,de=n.useRef(),ce=n.useMemo((function(){return f.default.Node.create()}),[]),ge=b();n.useLayoutEffect((function(){g(ce,ae,le)}),[ae,ce,le]),n.useLayoutEffect((function(){if(de.current&&fe)return fe.insertChild(ce,fe.getChildCount()),ue(ce,de.current,ae,r),function(){fe.removeChild(ce),se(ce)}}),[ce,fe,ae,r,ue,se]),n.useLayoutEffect((function(){ge()}),[t,ae,ge]);var me=n.useState([0,0]),pe=me[0],he=me[1],xe=1/le;i.useFrame((function(){var e=("number"==typeof ae.width?ae.width:null)||ce.getComputedWidth().valueOf()/le,t=("number"==typeof ae.height?ae.height:null)||ce.getComputedHeight().valueOf()/le;(Math.abs(e-pe[0])>xe||Math.abs(t-pe[1])>xe)&&he([e,t])}));var we=n.useMemo((function(){return{node:ce,size:pe}}),[ce,pe]);return l.default.createElement("group",u.default({ref:de},ie),l.default.createElement(w.Provider,{value:we},"function"==typeof t?t(pe[0],pe[1]):t))},exports.Flex=function(e){var t=e.size,r=void 0===t?[1,1,1]:t,o=e.yogaDirection,u=void 0===o?"ltr":o,d=e.plane,c=void 0===d?"xy":d,p=e.children,x=e.scaleFactor,y=void 0===x?100:x,b=e.onReflow,v=e.flexDirection,E=e.flexDir,B=e.dir,C=e.alignContent,D=e.alignItems,L=e.alignSelf,R=e.align,T=e.justifyContent,F=e.justify,W=e.flexBasis,M=e.basis,j=e.flexGrow,k=e.grow,G=e.flexShrink,I=e.shrink,_=e.flexWrap,P=e.wrap,S=e.margin,z=e.m,H=e.marginBottom,O=e.marginLeft,A=e.marginRight,q=e.marginTop,N=e.mb,J=e.ml,U=e.mr,V=e.mt,Y=e.padding,X=e.p,K=e.paddingBottom,Q=e.paddingLeft,Z=e.paddingRight,$=e.paddingTop,ee=e.pb,te=e.pl,ne=e.pr,re=e.pt,ie=e.height,ae=e.width,oe=e.maxHeight,ue=e.maxWidth,se=e.minHeight,le=e.minWidth,fe=s.default(e,["size","yogaDirection","plane","children","scaleFactor","onReflow","flexDirection","flexDir","dir","alignContent","alignItems","alignSelf","align","justifyContent","justify","flexBasis","basis","flexGrow","grow","flexShrink","shrink","flexWrap","wrap","margin","m","marginBottom","marginLeft","marginRight","marginTop","mb","ml","mr","mt","padding","p","paddingBottom","paddingLeft","paddingRight","paddingTop","pb","pl","pr","pt","height","width","maxHeight","maxWidth","minHeight","minWidth"]),de=n.useMemo((function(){var e={flexDirection:v,flexDir:E,dir:B,alignContent:C,alignItems:D,alignSelf:L,align:R,justifyContent:T,justify:F,flexBasis:W,basis:M,flexGrow:j,grow:k,flexShrink:G,shrink:I,flexWrap:_,wrap:P,margin:S,m:z,marginBottom:H,marginLeft:O,marginRight:A,marginTop:q,mb:N,ml:J,mr:U,mt:V,padding:Y,p:X,paddingBottom:K,paddingLeft:Q,paddingRight:Z,paddingTop:$,pb:ee,pl:te,pr:ne,pt:re,height:ie,width:ae,maxHeight:oe,maxWidth:ue,minHeight:se,minWidth:le};return m(e),e}),[R,C,D,L,B,W,M,E,v,j,k,G,I,_,ie,F,T,z,S,H,O,A,q,oe,ue,N,se,le,J,U,V,X,Y,K,Q,Z,$,ee,te,ne,re,ae,P]),ce=n.useRef([]),ge=n.useCallback((function(e,t,n,r){void 0===r&&(r=!1);var i=ce.current.findIndex((function(t){return t.node===e}));-1!==i&&ce.current.splice(i,1),ce.current.push({group:t,node:e,flexProps:n,centerAnchor:r})}),[]),me=n.useCallback((function(e){var t=ce.current.findIndex((function(t){return t.node===e}));-1!==t&&ce.current.splice(t,1)}),[]),pe=n.useMemo((function(){return f.default.Node.create()}),[]);n.useLayoutEffect((function(){g(pe,de,y)}),[pe,de,y]);var he=i.useThree().invalidate,xe=n.useRef(!0),we=n.useCallback((function(){xe.current=!0,he()}),[he]);n.useLayoutEffect((function(){we()}),[p,de,we]);var ye=n.useMemo((function(){return new a.Box3}),[]),be=n.useMemo((function(){return new a.Vector3}),[]),ve=c[0],Ee=c[1],Be=function(e){switch(e){case"xy":return"z";case"yz":return"x";case"xz":return"y"}}(c),Ce=function(e,t){switch(t){case"xy":return[e[0],e[1]];case"yz":return[e[1],e[2]];case"xz":return[e[0],e[2]]}}(r,c),De=Ce[0],Le=Ce[1],Re="ltr"===u?f.default.DIRECTION_LTR:"rtl"===u?f.default.DIRECTION_RTL:u,Te=n.useMemo((function(){return{requestReflow:we,registerBox:ge,unregisterBox:me,scaleFactor:y}}),[we,ge,me,y]),Fe=n.useMemo((function(){return{node:pe,size:[De,Le]}}),[pe,De,Le]);function We(){ce.current.forEach((function(e){var t=e.group,n=e.node,r=e.flexProps,i="number"==typeof r.width?r.width*y:r.width,a="number"==typeof r.height?r.height*y:r.height;void 0!==i&&void 0!==a?(n.setWidth(i),n.setHeight(a)):(ye.setFromObject(t).getSize(be),n.setWidth(i||be[ve]*y),n.setHeight(a||be[Ee]*y))})),pe.calculateLayout(De*y,Le*y,Re);var e=0,t=0,n=0,r=0;ce.current.forEach((function(i){var o,u=i.group,s=i.node,l=i.centerAnchor,f=s.getComputedLayout(),d=f.left,c=f.top,g=f.width,m=f.height,p=function(e){var t=e.x,n=e.y,r=e.z;return new a.Vector3(t,n,r)}(((o={})[ve]=(d+(l?g/2:0))/y,o[Ee]=-(c+(l?m/2:0))/y,o[Be]=0,o));e=Math.min(e,d),n=Math.min(n,c),t=Math.max(t,d+g),r=Math.max(r,c+m),u.position.copy(p)})),b&&b((t-e)/y,(r-n)/y),he()}return i.useFrame((function(){xe.current&&(xe.current=!1,We())})),l.default.createElement("group",fe,l.default.createElement(h.Provider,{value:Te},l.default.createElement(w.Provider,{value:Fe},p)))},exports.useContext=y,exports.useFlexSize=function(){return y(w).size},exports.useReflow=b;
